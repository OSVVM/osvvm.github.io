Report.sources['./../../../OsvvmLibraries/VideoBus_LouisAdriaens/src/VideoBusRx.vhd'] = '--\n--&nbsp;&nbsp;File&nbsp;Name:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VideoBusRx.vhd\n--\n--&nbsp;&nbsp;Maintainer:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Louis&nbsp;Adriaens&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;email:&nbsp;&nbsp;louisadriaens@outlook.com\n--&nbsp;&nbsp;Contributor(s):\n--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Louis&nbsp;Adriaens&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;louisadriaens@outlook.com\n--\n--\n--&nbsp;&nbsp;Description:\n--&nbsp;&nbsp;Verification&nbsp;Component&nbsp;to&nbsp;receive&nbsp;on&nbsp;a&nbsp;VideoBus&nbsp;interface&nbsp;\n--&nbsp;&nbsp;Based&nbsp;on&nbsp;OSVVM&nbsp;Framework\n--\n--\n--\n--&nbsp;&nbsp;Revision&nbsp;History:\n--&nbsp;&nbsp;&nbsp;&nbsp;Date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Version&nbsp;&nbsp;&nbsp;&nbsp;Description\n--&nbsp;&nbsp;&nbsp;&nbsp;03/2024&nbsp;&nbsp;&nbsp;2024.03&nbsp;&nbsp;&nbsp;&nbsp;Updated&nbsp;SafeResize&nbsp;to&nbsp;use&nbsp;ModelID\n--&nbsp;&nbsp;&nbsp;&nbsp;08/2023&nbsp;&nbsp;&nbsp;1.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Initial&nbsp;revision\n&nbsp;\nlibrary&nbsp;ieee;\n&nbsp;&nbsp;&nbsp;&nbsp;use&nbsp;ieee.std_logic_1164.all;\n&nbsp;&nbsp;&nbsp;&nbsp;use&nbsp;ieee.numeric_std.all;\n&nbsp;&nbsp;&nbsp;&nbsp;use&nbsp;ieee.numeric_std_unsigned.all;\n&nbsp;&nbsp;&nbsp;&nbsp;use&nbsp;ieee.math_real.all;\n&nbsp;\nlibrary&nbsp;osvvm;\n&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;osvvm.OsvvmContext;\n&nbsp;&nbsp;&nbsp;&nbsp;use&nbsp;osvvm.ScoreboardPkg_slv.all;\n&nbsp;\nlibrary&nbsp;osvvm_common;\n&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;osvvm_common.OsvvmCommonContext;\n&nbsp;\nlibrary&nbsp;work;\n&nbsp;&nbsp;&nbsp;&nbsp;use&nbsp;work.VideoBusRxPkg.all;\n&nbsp;\nentity&nbsp;VideoBusRx&nbsp;is\n&nbsp;&nbsp;&nbsp;&nbsp;generic&nbsp;(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MODEL_ID_NAME&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;string&nbsp;:=&nbsp;&quot;&quot;;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VIDEO_HEIGHT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;natural&nbsp;:=&nbsp;64;&nbsp;&nbsp;--&nbsp;number&nbsp;of&nbsp;lines&nbsp;in&nbsp;a&nbsp;frame\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VIDEO_WIDTH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;natural&nbsp;:=&nbsp;64;&nbsp;&nbsp;--&nbsp;number&nbsp;of&nbsp;pixels&nbsp;in&nbsp;a&nbsp;line\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PIXEL_DEPTH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;natural&nbsp;:=&nbsp;24;&nbsp;&nbsp;--&nbsp;number&nbsp;of&nbsp;bits&nbsp;in&nbsp;a&nbsp;pixel\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NUM_DATA_STREAMS&nbsp;:&nbsp;natural&nbsp;:=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;number&nbsp;of&nbsp;pixel&nbsp;data&nbsp;streams\n&nbsp;&nbsp;&nbsp;&nbsp;);\n&nbsp;&nbsp;&nbsp;&nbsp;port&nbsp;(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Globals\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clk&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;in&nbsp;std_logic;\n&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;VideoBus&nbsp;Functional&nbsp;Interface\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;VideoBus&nbsp;Receiver:&nbsp;input\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vid_fval_in&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;in&nbsp;&nbsp;std_logic;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vid_lval_in&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;in&nbsp;&nbsp;std_logic;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vid_dval_in&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;in&nbsp;&nbsp;std_logic;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vid_data_in&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;in&nbsp;&nbsp;VideoDataArray(0&nbsp;to&nbsp;NUM_DATA_STREAMS-1)(PIXEL_DEPTH-1&nbsp;downto&nbsp;0);\n&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Testbench&nbsp;Transaction&nbsp;Interface\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TransRec&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;InOut&nbsp;StreamRecType\n&nbsp;&nbsp;&nbsp;&nbsp;);\n&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Derive&nbsp;ModelInstance&nbsp;label&nbsp;from&nbsp;path_name\n&nbsp;&nbsp;&nbsp;&nbsp;constant&nbsp;MODEL_INSTANCE_NAME&nbsp;:&nbsp;string&nbsp;:=\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;use&nbsp;MODEL_ID_NAME&nbsp;Generic&nbsp;if&nbsp;set,&nbsp;otherwise&nbsp;use&nbsp;instance&nbsp;label&nbsp;(preferred&nbsp;if&nbsp;set&nbsp;as&nbsp;entityname_1)\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IfElse(MODEL_ID_NAME&nbsp;/=&nbsp;&quot;&quot;,&nbsp;MODEL_ID_NAME,&nbsp;to_lower(PathTail(VideoBusRx&apos;PATH_NAME)));\n&nbsp;\nend&nbsp;entity&nbsp;VideoBusRx;\narchitecture&nbsp;SimpleBlockingReceive&nbsp;of&nbsp;VideoBusRx&nbsp;is\n&nbsp;&nbsp;&nbsp;&nbsp;signal&nbsp;ModelID&nbsp;:&nbsp;AlertLogIDType;\n&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;RecieveFifo&nbsp;which&nbsp;contains&nbsp;received&nbsp;frames\n&nbsp;&nbsp;&nbsp;&nbsp;signal&nbsp;ReceiveFifo&nbsp;:&nbsp;ScoreboardIdType;\n&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Number&nbsp;of&nbsp;received&nbsp;frames\n&nbsp;&nbsp;&nbsp;&nbsp;signal&nbsp;ReceiveCount&nbsp;:&nbsp;integer&nbsp;:=&nbsp;0;&nbsp;&nbsp;\nbegin\n&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;--------------------------------------------------------------------\n&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Initialize&nbsp;alerts\n&nbsp;&nbsp;&nbsp;&nbsp;--------------------------------------------------------------------\n&nbsp;&nbsp;&nbsp;&nbsp;Initialize&nbsp;:&nbsp;process\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;variable&nbsp;ID&nbsp;:&nbsp;AlertLogIDType;\n&nbsp;&nbsp;&nbsp;&nbsp;begin\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Alerts\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ID&nbsp;:=&nbsp;NewID(MODEL_INSTANCE_NAME);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ModelID&nbsp;&lt;=&nbsp;ID;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ReceiveFifo&nbsp;&lt;=&nbsp;NewID(&quot;ReceiveFifo&quot;,&nbsp;ID,&nbsp;ReportMode&nbsp;=&gt;&nbsp;DISABLED,&nbsp;Search&nbsp;=&gt;&nbsp;PRIVATE_NAME);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wait;\n&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;process&nbsp;Initialize;\n&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;--------------------------------------------------------------------\n&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Transaction&nbsp;Handler\n&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Decodes&nbsp;transactions&nbsp;and&nbsp;Handlers&nbsp;DUT&nbsp;interface\n&nbsp;&nbsp;&nbsp;&nbsp;--------------------------------------------------------------------\n&nbsp;&nbsp;&nbsp;&nbsp;TransactionHandler&nbsp;:&nbsp;process\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alias&nbsp;operation&nbsp;:&nbsp;StreamOperationType&nbsp;is&nbsp;TransRec.Operation;\n&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;variable&nbsp;RxData&nbsp;:&nbsp;std_logic_vector(TransRec.DataFromModel&apos;range);\n&nbsp;&nbsp;&nbsp;&nbsp;begin\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wait&nbsp;for&nbsp;0&nbsp;ns;&nbsp;--&nbsp;Allow&nbsp;ModelID&nbsp;to&nbsp;become&nbsp;valid\n&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loop\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WaitForTransaction(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clk&nbsp;=&gt;&nbsp;Clk,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rdy&nbsp;=&gt;&nbsp;TransRec.Rdy,\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ack&nbsp;=&gt;&nbsp;TransRec.Ack\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;operation&nbsp;is\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Model&nbsp;Transaction&nbsp;Dispatch\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;when&nbsp;GET&nbsp;=&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TransRec.BoolFromModel&nbsp;&lt;=&nbsp;TRUE;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(Empty(ReceiveFifo))&nbsp;then\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Wait&nbsp;for&nbsp;data\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WaitForToggle(ReceiveCount);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Settling&nbsp;for&nbsp;when&nbsp;not&nbsp;Empty&nbsp;at&nbsp;current&nbsp;time,&nbsp;but&nbsp;ReceiveCount&nbsp;not&nbsp;updated&nbsp;yet\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;ReceiveCount&nbsp;used&nbsp;in&nbsp;reporting&nbsp;below.\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wait&nbsp;for&nbsp;0&nbsp;ns;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;if;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Put&nbsp;Data&nbsp;into&nbsp;record\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RxData&nbsp;:=&nbsp;Pop(ReceiveFifo);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TransRec.DataFromModel&nbsp;&lt;=&nbsp;SafeResize(ModelID,&nbsp;RxData,&nbsp;&nbsp;TransRec.DataFromModel&apos;length);&nbsp;\n&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Log(ModelID,&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Received:&nbsp;&quot;&nbsp;&amp;&nbsp;to_hxstring(RxData)&nbsp;&amp;&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;.&nbsp;&nbsp;Operation&nbsp;#&nbsp;&quot;&nbsp;&amp;&nbsp;to_string(ReceiveCount),\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEBUG,&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Enable&nbsp;=&gt;&nbsp;TransRec.BoolToModel);&nbsp;\n&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Execute&nbsp;Standard&nbsp;Directive&nbsp;Transactions\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;when&nbsp;WAIT_FOR_TRANSACTION&nbsp;=&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;Empty(ReceiveFifo)&nbsp;then&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WaitForToggle(ReceiveCount);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;if;&nbsp;\n&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;when&nbsp;WAIT_FOR_CLOCK&nbsp;=&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WaitForClock(Clk,&nbsp;TransRec.IntToModel);&nbsp;--WaitForClock&nbsp;stops&nbsp;the&nbsp;VC&nbsp;for&nbsp;the&nbsp;specified&nbsp;number&nbsp;of&nbsp;clocks\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;when&nbsp;GET_ALERTLOG_ID&nbsp;=&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TransRec.IntFromModel&nbsp;&lt;=&nbsp;integer(ModelID);&nbsp;--&nbsp;GetAlertLogID&nbsp;looks&nbsp;up&nbsp;the&nbsp;AlertLogID&nbsp;of&nbsp;the&nbsp;VC&nbsp;and&nbsp;returns&nbsp;it\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;when&nbsp;GET_TRANSACTION_COUNT&nbsp;=&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TransRec.IntFromModel&nbsp;&lt;=&nbsp;ReceiveCount;\n&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;when&nbsp;MULTIPLE_DRIVER_DETECT&nbsp;=&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Alert(ModelID,&nbsp;&quot;Multiple&nbsp;Drivers&nbsp;on&nbsp;Transaction&nbsp;Record.&quot;&nbsp;&amp;&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&nbsp;&nbsp;Transaction&nbsp;#&nbsp;&quot;&nbsp;&amp;&nbsp;to_string(TransRec.Rdy),&nbsp;FAILURE);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;when&nbsp;others&nbsp;=&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Alert(ModelID,&nbsp;&quot;Unimplemented&nbsp;Transaction:&nbsp;&quot;&nbsp;&amp;&nbsp;to_string(Operation),&nbsp;FAILURE);\n&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;case;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;loop;\n&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;process&nbsp;TransactionHandler;\n&nbsp;\n------------------------------------------------------------\n--&nbsp;Fval&nbsp;/&nbsp;Lval&nbsp;/&nbsp;Dval&nbsp;Checker\n------------------------------------------------------------\nVideoBusLineChecker&nbsp;:&nbsp;process(vid_dval_in,&nbsp;vid_lval_in,&nbsp;vid_fval_in)\nbegin&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;AlertIf(ModelID,&nbsp;(vid_dval_in=&apos;1&apos;&nbsp;and&nbsp;not&nbsp;(vid_lval_in=&apos;1&apos;&nbsp;and&nbsp;vid_fval_in=&apos;1&apos;)),&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;vid_dval_in&nbsp;high&nbsp;while&nbsp;vid_lval_in&nbsp;or&nbsp;vid_fval_in&nbsp;low!&quot;,&nbsp;FAILURE);\n&nbsp;&nbsp;&nbsp;&nbsp;AlertIf(ModelID,&nbsp;(vid_lval_in=&apos;1&apos;&nbsp;and&nbsp;not&nbsp;vid_fval_in=&apos;1&apos;),&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;vid_lval_in&nbsp;high&nbsp;while&nbsp;vid_fval_in&nbsp;low!&quot;,&nbsp;FAILURE);\nend&nbsp;process&nbsp;VideoBusLineChecker;\n&nbsp;\n------------------------------------------------------------\n--&nbsp;VideoBus&nbsp;Receive&nbsp;Logic&nbsp;+&nbsp;Checks&nbsp;if&nbsp;number&nbsp;of&nbsp;pixel&nbsp;in&nbsp;line&nbsp;/&nbsp;number&nbsp;of&nbsp;lines&nbsp;are&nbsp;correct\n------------------------------------------------------------\n&nbsp;VideoBusHandler&nbsp;:&nbsp;process\n&nbsp;&nbsp;&nbsp;&nbsp;variable&nbsp;RxData&nbsp;:&nbsp;std_logic_vector(TransRec.DataFromModel&apos;range);\n&nbsp;&nbsp;&nbsp;&nbsp;variable&nbsp;pixelCount&nbsp;:&nbsp;integer;\n&nbsp;&nbsp;&nbsp;&nbsp;variable&nbsp;lineCount&nbsp;:&nbsp;integer;\nbegin&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;wait&nbsp;for&nbsp;0&nbsp;ns;&nbsp;--&nbsp;Allow&nbsp;ModelID&nbsp;to&nbsp;become&nbsp;valid\n&nbsp;&nbsp;&nbsp;&nbsp;SetLogEnable(ModelID,&nbsp;PASSED,&nbsp;false);&nbsp;--&nbsp;don&apos;t&nbsp;log&nbsp;passed&nbsp;affirmations\n&nbsp;&nbsp;&nbsp;&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;wait&nbsp;until&nbsp;rising_edge(vid_fval_in);\n&nbsp;&nbsp;&nbsp;&nbsp;Log(ModelID,&nbsp;&quot;New&nbsp;frame&nbsp;started&nbsp;in&nbsp;VideoBusRx!&quot;,&nbsp;INFO);&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;pixelCount&nbsp;:=&nbsp;0;\n&nbsp;&nbsp;&nbsp;&nbsp;lineCount&nbsp;:=&nbsp;0;\n&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(vid_fval_in&nbsp;=&nbsp;&apos;1&apos;)&nbsp;loop\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wait&nbsp;until&nbsp;rising_edge(Clk);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(vid_lval_in&nbsp;=&nbsp;&apos;1&apos;)&nbsp;then\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pixelCount&nbsp;:=&nbsp;0;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(vid_lval_in&nbsp;=&nbsp;&apos;1&apos;)&nbsp;loop\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wait&nbsp;until&nbsp;rising_edge(Clk);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(vid_dval_in&nbsp;=&nbsp;&apos;1&apos;)&nbsp;then\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;dataStream&nbsp;in&nbsp;0&nbsp;to&nbsp;NUM_DATA_STREAMS-1&nbsp;loop\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RxData&nbsp;:=&nbsp;vid_data_in(dataStream);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Push(ReceiveFifo,&nbsp;RxData);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Increment(ReceiveCount);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pixelCount&nbsp;:=&nbsp;pixelCount&nbsp;+&nbsp;1;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;loop;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;if;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;loop;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AffirmIf(ModelID,&nbsp;(pixelCount&nbsp;=&nbsp;VIDEO_WIDTH),&nbsp;&quot;pixelCount:&nbsp;&quot;&nbsp;&amp;&nbsp;to_string(pixelCount)&nbsp;&amp;&nbsp;&quot;&nbsp;/=&nbsp;VIDEO_WIDTH:&nbsp;&quot;&nbsp;&amp;&nbsp;to_string(VIDEO_WIDTH));\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Fill&nbsp;missing&nbsp;pixels\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;1&nbsp;to&nbsp;(VIDEO_WIDTH&nbsp;-&nbsp;pixelCount)&nbsp;loop&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RxData&nbsp;:=&nbsp;(others&nbsp;=&gt;&nbsp;&apos;U&apos;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Push(ReceiveFifo,&nbsp;RxData);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Increment(ReceiveCount);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;loop;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineCount&nbsp;:=&nbsp;lineCount&nbsp;+&nbsp;1;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;if;\n&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;loop;\n&nbsp;&nbsp;&nbsp;&nbsp;AffirmIf(ModelID,&nbsp;(lineCount&nbsp;=&nbsp;VIDEO_HEIGHT),&nbsp;&quot;lineCount:&nbsp;&nbsp;&quot;&nbsp;&amp;&nbsp;to_string(lineCount)&nbsp;&amp;&nbsp;&quot;&nbsp;/=&nbsp;VIDEO_HEIGHT:&nbsp;&quot;&nbsp;&amp;&nbsp;to_string(VIDEO_HEIGHT));\n&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Fill&nbsp;missing&nbsp;pixels\n&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;j&nbsp;in&nbsp;1&nbsp;to&nbsp;(VIDEO_HEIGHT&nbsp;-&nbsp;lineCount)&nbsp;loop\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;1&nbsp;to&nbsp;VIDEO_WIDTH&nbsp;loop\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RxData&nbsp;:=&nbsp;(others&nbsp;=&gt;&nbsp;&apos;U&apos;);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Push(ReceiveFifo,&nbsp;RxData);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Increment(ReceiveCount);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;loop;&nbsp;&nbsp;&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;loop;\nend&nbsp;process&nbsp;VideoBusHandler;\n&nbsp;\nend&nbsp;architecture&nbsp;SimpleBlockingReceive;';
Report.brushes['./../../../OsvvmLibraries/VideoBus_LouisAdriaens/src/VideoBusRx.vhd'] = 'vhdl'
